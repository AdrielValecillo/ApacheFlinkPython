<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache Flink - Analizador de Texto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/styles.css" rel="stylesheet">
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="d-flex align-items-center">
                <img src="https://flink.apache.org/img/flink-header-logo.svg" alt="Apache Flink Logo" class="flink-logo">
                <h1 class="mb-0">Apache Flink - Analizador de Texto</h1>
            </div>
            <p class="lead mt-2 mb-0">Demostración interactiva de procesamiento de flujos de datos con Apache Flink</p>
        </div>
    </div>

    <div class="container mb-5">
        <div class="row">
            <div class="col-md-8">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="text-tab" data-bs-toggle="tab" data-bs-target="#text" type="button">Análisis de Texto</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="file-tab" data-bs-toggle="tab" data-bs-target="#file" type="button">Subir Archivo</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button">Acerca de Flink</button>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="text" role="tabpanel">
                        <h3>Analizar Texto con Apache Flink</h3>
                        <p>Ingresa texto en español para analizarlo usando Apache Flink:</p>
                        <form id="textForm">
                            <div class="mb-3">
                                <textarea class="form-control" id="textInput" rows="6" placeholder="Ingresa texto para analizar..."></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="jobTypeSelect" class="form-label">Selecciona el tipo de análisis:</label>
                                <select class="form-select" id="jobTypeSelect">
                                    <!-- Se llenará dinámicamente -->
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Analizar Texto</button>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="file" role="tabpanel">
                        <h3>Subir Archivo para Análisis</h3>
                        <p>Sube un archivo de texto para analizarlo con Apache Flink:</p>
                        <form id="fileForm" enctype="multipart/form-data">
                            <div class="mb-3">
                                <input class="form-control" type="file" id="fileInput" accept=".txt,.csv,.md,.html,.json">
                            </div>
                            <div class="mb-3">
                                <label for="fileJobTypeSelect" class="form-label">Selecciona el tipo de análisis:</label>
                                <select class="form-select" id="fileJobTypeSelect">
                                    <!-- Se llenará dinámicamente -->
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Subir y Analizar</button>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="about" role="tabpanel">
                        <h3>Acerca de Apache Flink</h3>
                        <p>
                            Apache Flink es un framework y motor de procesamiento distribuido para cálculos con estado sobre flujos de datos ilimitados y limitados. Flink está diseñado para ejecutarse en todos los entornos de cluster comunes, realizar cálculos a velocidad de memoria y a cualquier escala.
                        </p>
                        
                        <h4 class="mt-4">Características principales de Apache Flink</h4>
                        <ul>
                            <li><strong>Procesamiento de flujos con estado:</strong> Permite mantener estado entre eventos y proporcionar resultados consistentes.</li>
                            <li><strong>Exactamente una vez:</strong> Garantías de procesamiento de eventos exactamente una vez, incluso en caso de fallos.</li>
                            <li><strong>Baja latencia y alta throughput:</strong> Procesa millones de eventos por segundo con latencias de milisegundos.</li>
                            <li><strong>Ventanas de tiempo:</strong> Soporte flexible para procesamiento basado en tiempo de eventos.</li>
                            <li><strong>Alta disponibilidad:</strong> Recuperación rápida de fallos sin pérdida de datos.</li>
                        </ul>
                        
                        <h4 class="mt-4">Arquitectura básica de Flink</h4>
                        <div class="text-center my-4">
                            <img src="https://flink.apache.org/img/flink-home-graphic.png" alt="Arquitectura de Flink" class="img-fluid" style="max-width: 80%;">
                        </div>
                        <p>
                            En esta demostración, estamos utilizando la API DataStream de Flink para procesar flujos de texto y realizar análisis de frecuencia de palabras y extracción de palabras clave. La integración con FastAPI nos permite exponer esta funcionalidad a través de una interfaz web interactiva.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="results-container">
                    <h3>Resultados</h3>
                    <div id="spinner" class="spinner-container">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Procesando...</span>
                        </div>
                        <p class="mt-2">Procesando datos con Apache Flink...</p>
                    </div>
                    <div id="resultsContent">
                        <p>Los resultados del análisis aparecerán aquí.</p>
                    </div>
                    <div class="chart-container" id="resultsChart">
                        <!-- Aquí se mostrará el gráfico -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/scripts.js"></script>
</body>
</html>
